/* notes.css - Styles for notes, shapes, and portal effects */

/* Note styling - Base styles for all notes */
.note {
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: bold;
    border-radius: 20%; /* Added slight rounding to all shapes */
    cursor: pointer;
    user-select: none;
    transition: all 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    position: absolute; /* Make notes absolute positioned */
    z-index: 5; /* Above panels but below divider */
}

.note.draggable {
    position: absolute;
}

.note.dragging {
    cursor: grabbing;
    transform: scale(1.1);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
    opacity: 0.9;
    z-index: 30 !important; /* Ensure it's on top of everything while dragging */
}

/* Note colors by player */
.note-a {
    background: #00ff9d;
    color: #003629;
    border: 2px solid #00cc7a;
}

.note-b {
    background: #ff00cc;
    color: #660066;
    border: 2px solid #cc0099;
}

/* Hollow state base styles */
.note-a.hollow {
    background-color: transparent;
    border: 2px solid #00cc7a;
    color: #00cc7a;
}

.note-b.hollow {
    background-color: transparent;
    border: 2px solid #ff00cc;
    color: #ff00cc;
}

/* Ensure text is visible and centered for all shapes */
.note span {
    position: relative;
    z-index: 2;
    display: inline-block;
}

/* ===== SHAPE DEFINITIONS ===== */

/* Square shape (default) */
.note.shape-square {
    border-radius: 10px; /* Keep the existing rounded corner style */
}

/* Triangle shape using clip-path */
.note.shape-triangle {
    clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
    position: absolute;
    overflow: visible;
}

.note.shape-triangle.hollow::before {
    content: '';
    position: absolute;
    top: 3px; /* Adjust for border thickness */
    left: 3px;
    right: 3px;
    bottom: 1px;
    clip-path: polygon(50% 0%, 100% 100%, 0% 100%); /* Smaller inner triangle */
    background-color: transparent;
    z-index: 1;
}

/* Player A triangle */
.note-a.shape-triangle {
    background-color: #00ff9d; /* Filled state */
}

.note-a.shape-triangle.hollow::before {
    background-color: rgba(26, 108, 49, 0.9); /* Match the background color of player A */
}

/* Player B triangle */
.note-b.shape-triangle {
    background-color: #ff00cc; /* Filled state */
}

.note-b.shape-triangle.hollow::before {
    background-color: rgba(113, 28, 145, 0.9); /* Match the background color of player B */
}

/* Diamond shape */
.note.shape-diamond {
    transform: rotate(45deg);
    width: 65px;
    height: 65px;
}

.note.shape-diamond span {
    transform: rotate(-45deg); /* Counter-rotate the text */
}

.note.shape-diamond.note-in-cell {
    transform: rotate(0deg); /* Counter-rotate the text */
}

/* Player A diamond */
.note-a.shape-diamond {
    background-color: #00ff9d; /* Filled state */
}

.note-a.shape-diamond.hollow {
    background-color: transparent;
}

/* Player B diamond */
.note-b.shape-diamond {
    background-color: #ff00cc; /* Filled state */
}

.note-b.shape-diamond.hollow {
    background-color: transparent;
}

/* Circle shape */
.note.shape-circle {
    border-radius: 50%;
}

/* Player A circle */
.note-a.shape-circle {
    background-color: #00ff9d; /* Filled state */
}

.note-a.shape-circle.hollow {
    background-color: transparent;
}

/* Player B circle */
.note-b.shape-circle {
    background-color: #ff00cc; /* Filled state */
}

.note-b.shape-circle.hollow {
    background-color: transparent;
}

/* Portal counterpart styling */
.portal-counterpart {
    opacity: 0;
    pointer-events: none; /* Make portal counterparts non-interactive */
    z-index: 6; /* Above regular notes but below active dragged notes */
    overflow: visible;
}

/* When a note crosses the divider, make its counterpart visible */
.portal-counterpart.portal-active {
    opacity: 1;
}
